generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model KeywordRule {
  id               String   @id @default(cuid())
  keyword          String
  subreddit        String?
  responseTemplate String
  isActive         Boolean  @default(true)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@map("keyword_rules")
}

model BotActivity {
  id            String   @id @default(cuid())
  postId        String?
  commentId     String?
  keyword       String
  response      String
  subreddit     String
  timestamp     DateTime @default(now())
  success       Boolean

  @@map("bot_activities")
}

model VoiceInteraction {
  id            String   @id @default(cuid())
  postId        String?
  commentId     String?
  subreddit     String
  audioInput    String?  // Base64 encoded audio
  transcription String?
  aiResponse    String?
  audioOutput   String?  // Base64 encoded audio response
  timestamp     DateTime @default(now())
  success       Boolean

  @@map("voice_interactions")
}

model DiscordActivity {
  id          String   @id @default(cuid())
  messageId   String   @unique
  guildId     String
  channelId   String
  authorId    String
  content     String
  response    String?
  keywordId   String
  timestamp   DateTime @default(now())
  success     Boolean

  @@map("discord_activities")
}

model DiscordConfig {
  id          String   @id @default(cuid())
  guildId     String   @unique
  guildName   String
  enabled     Boolean  @default(true)
  channels    String   // JSON array of channel IDs
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("discord_configs")
}

model BusinessProfile {
  id          String   @id @default(cuid())
  name        String
  services    String   // Comma-separated services
  hours       String
  contact     String
  pricing     String?  // JSON string for pricing
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("business_profiles")
}
